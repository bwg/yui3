YUI.add("menu-plugin",function(e,t){e.namespace("Plugin").Menu=e.Base.create("menuPlugin",e.Menu,[e.Plugin.Base],{initializer:function(t){this._host=t.host,this._hostIsBody=this._host===e.one("body"),this._attachMenuPluginEvents()},destructor:function(){clearTimeout(this._pluginHideTimeout)},reposition:function(t){return e.Menu.prototype.reposition.call(this,t||this._host)},_attachMenuPluginEvents:function(){var t=e.one("doc");this._menuEvents.push(t.after("mousedown",this._afterDocMouseDown,this)),this.get("showOnClick")&&this.afterHostEvent("click",this._afterHostClick),this.get("showOnContext")&&(this._hostIsBody?this._menuEvents.push(t.on("contextmenu",this._onHostContext,this)):this.onHostEvent("contextmenu",this._onHostContext)),this.get("showOnHover")&&(this.afterHostEvent({blur:this._afterHostBlur,focus:this._afterHostFocus,mouseenter:this._afterHostMouseEnter,mouseleave:this._afterHostMouseLeave}),this._menuEvents.push(this.get("container").after({mouseenter:e.bind(this._afterContainerMouseEnter,this),mouseleave:e.bind(this._afterContainerMouseLeave,this)})))},_afterHostBlur:function(){this.hide()},_afterHostClick:function(){this.rendered||this.render(),this.toggle({anchorPoint:this._host})},_afterHostFocus:function(){clearTimeout(this._pluginHideTimeout),this.rendered||this.render(),this.show({anchorPoint:this._host})},_afterHostMouseEnter:function(){clearTimeout(this._pluginHideTimeout),this.rendered||this.render(),this.show({anchorPoint:this._host})},_afterHostMouseLeave:function(){var e=this;this._pluginHideTimeout=setTimeout(function(){e.hide()},300)},_afterContainerMouseEnter:function(){clearTimeout(this._pluginHideTimeout)},_afterContainerMouseLeave:function(){var e=this;this._pluginHideTimeout=setTimeout(function(){e.hide()},300)},_afterDocMouseDown:function(e){if(!this.get("visible"))return;var t=this.get("container"),n=this._hostIsBody?null:this._host;e.target.ancestor(function(e){return e===t||e===n},!0)||this.hide()},_onHostContext:function(e){e.preventDefault(),this.rendered||this.render(),this.show({anchorPoint:[e.clientX,e.clientY]})}},{NS:"menu",ATTRS:{showOnClick:{value:!0,writeOnce:"initOnly"},showOnContext:{value:!1,writeOnce:"initOnly"},showOnHover:{value:!1,writeOnce:"initOnly"}}})},"@VERSION@",{requires:["event-focus","menu","node-pluginhost","plugin"]});
